<div class="contacts-container">
  <div class="contacts-header">
    <div class="header-content">
      <div class="header-icon">
        <span class="material-icons">contact_mail</span>
      </div>
      <div class="header-text">
        <h1>Contact Messages</h1>
        <p>Manage and respond to customer inquiries</p>
      </div>
    </div>
    <div class="stats-summary">
      <div class="stat-item">
        <span class="stat-number">{{ contactMessages.length }}</span>
        <span class="stat-label">Total Messages</span>
      </div>
      <div class="stat-item">
        <span class="stat-number">{{ unreadMessagesCount }}</span>
        <span class="stat-label">Unread</span>
      </div>
    </div>
  </div>

  <div class="messages-grid" *ngIf="!loading">
    <div class="message-card" *ngFor="let message of contactMessages; trackBy: trackById">
      <div class="message-header">
        <div class="sender-info">
          <div class="sender-avatar">
            <span class="material-icons">person</span>
          </div>
          <div class="sender-details">
            <h3>{{ message.name }}</h3>
            <p>{{ message.email }}</p>
          </div>
        </div>
        <div class="message-meta">
          <span class="date">{{ message.created_at | date:'mediumDate' }}</span>
          <span class="status-badge" [class]="message.is_read ? 'read' : 'unread'">
            {{ message.is_read ? 'Read' : 'Unread' }}
          </span>
        </div>
      </div>

      <div class="message-content">
        <h4>{{ message.subject }}</h4>
        <p>{{ message.message }}</p>
      </div>

      <div class="message-actions">
        <button
          class="action-btn mark-read"
          (click)="markAsRead(message.id)"
          *ngIf="!message.is_read"
          title="Mark as read">
          <span class="material-icons">visibility</span>
          Mark Read
        </button>
        <button
          class="action-btn reply"
          title="Reply to message">
          <span class="material-icons">reply</span>
          Reply
        </button>
        <button
          class="action-btn delete"
          (click)="deleteContactMessage(message.id)"
          title="Delete message">
          <span class="material-icons">delete</span>
          Delete
        </button>
      </div>
    </div>

    <div *ngIf="contactMessages.length === 0" class="empty-state">
      <div class="empty-icon">
        <span class="material-icons">mail</span>
      </div>
      <h3>No Messages Yet</h3>
      <p>Contact messages from your website will appear here.</p>
    </div>
  </div>

  <div *ngIf="loading" class="loading-state">
    <div class="loading-spinner">
      <span class="material-icons spinning">refresh</span>
    </div>
    <p>Loading messages...</p>
  </div>

  <div *ngIf="error" class="error-state">
    <div class="error-icon">
      <span class="material-icons">error</span>
    </div>
    <h3>Error Loading Messages</h3>
    <p>{{ error }}</p>
    <button class="retry-btn" (click)="loadContactMessages()">
      <span class="material-icons">refresh</span>
      Try Again
    </button>
  </div>
</div>
